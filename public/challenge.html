<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <title>å•è¯å™©æ¢¦ â€ é—¯å…³æ¨¡å¼</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-900 flex flex-col items-center justify-center min-h-screen">

  <div class="bg-white shadow-md rounded p-6 w-full max-w-md">
    <h1 class="text-2xl font-bold mb-6">ğŸš€ é—¯å…³æ¨¡å¼ï¼ˆæ¯å…³ 100 ä¸ªå•è¯ï¼‰</h1>
    <div id="question" class="text-xl font-semibold mb-4">åŠ è½½ä¸­...</div>
    <input id="answer" type="text" placeholder="è¯·è¾“å…¥è‹±æ–‡å•è¯çš„ä¸­æ–‡æ„æ€" 
           class="w-full border rounded px-3 py-2 mb-4" />
    <button onclick="checkAnswer()" class="w-full bg-green-500 text-white px-4 py-2 rounded mb-4">
      æäº¤
    </button>
    <div id="feedback" class="text-lg mb-4"></div>
    <a href="index.html" class="underline text-blue-600">è¿”å›é¦–é¡µ</a>
  </div>

  <script>
    let wordsByLevel = {};
    let currentLevel = 1;
    let currentList = [];
    let currentIndex = 0;

    async function loadWords() {
      try {
        const resp = await fetch('words.json');
        wordsByLevel = await resp.json();
        currentList = wordsByLevel["level1"];
        currentIndex = 0;
        loadQuestion();
      } catch(e) {
        document.getElementById('question').innerText = 'è½½å…¥è¯åº“å¤±è´¥';
      }
    }

    function loadQuestion() {
      if (currentIndex >= currentList.length) {
        currentLevel++;
        const nextKey = "level" + currentLevel;
        if (wordsByLevel[nextKey]) {
          currentList = wordsByLevel[nextKey];
          currentIndex = 0;
          alert(`ç¬¬ ${currentLevel-1} å…³å®Œæˆï¼è¿›å…¥ç¬¬ ${currentLevel} å…³`);
        } else {
          document.getElementById('question').innerText = "ğŸ‰ å…¨éƒ¨å…³å¡å®Œæˆï¼";
          document.getElementById('answer').style.display = "none";
          return;
        }
      }
      document.getElementById('question').innerText = `ç¬¬ ${currentLevel} å…³ â€ è¯·ç¿»è¯‘ï¼š${currentList[currentIndex]}`;
      document.getElementById('answer').value = '';
      document.getElementById('feedback').innerText = '';
    }

    function checkAnswer() {
      const user = document.getElementById('answer').value.trim();
      const correct = currentList[currentIndex];
      if (user.toLowerCase() === correct.toLowerCase()) {
        document.getElementById('feedback').innerText = "âœ… æ­£ç¡®ï¼";
      } else {
        document.getElementById('feedback').innerText = `âŒ é”™è¯¯ï¼Œç­”æ¡ˆæ˜¯ï¼š${correct}`;
        saveWrong(correct);
      }
      currentIndex++;
      setTimeout(loadQuestion, 800);
    }

    function saveWrong(word) {
      const key = 'wrongs';
      let arr = JSON.parse(localStorage.getItem(key) || '[]');
      if (!arr.includes(word)) {
        arr.push(word);
        localStorage.setItem(key, JSON.stringify(arr));
      }
    }

    window.addEventListener('load', loadWords);
  </script>

</body>
</html>
